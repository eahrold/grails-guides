<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
                      "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
    <title>3 Creating Controllers</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen, print" title="Style" charset="utf-8"/>
    <link rel="stylesheet" href="../css/guide.css" type="text/css" media="screen, print" title="Style" charset="utf-8" />            
    <link rel="stylesheet" href="../css/pdf.css" type="text/css" media="print" title="PDF" charset="utf-8"/>
    <script type="text/javascript">
function addJsClass() {
    var classes = document.body.className.split(" ");
    classes.push("js");
    document.body.className = classes.join(" ");
}
    </script>
</head>

<body class="body" onload="addJsClass();">
<div id="navigation">
    <div class="navTitle">
        
        Grails Framework Guide 
    </div>
    <div class="navLinks">
        <ul>
            <li>
                <div id="nav-summary" onmouseover="toggleNavSummary(false)" onmouseout="toggleNavSummary(true)">
                    <a href="../guide/index.html" class="button">Table of contents</a>

                    <div id="nav-summary-childs" style="display:none;">
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/gettingStarted.html"><strong>1</strong><span>Getting Started</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/creatingTheApp.html"><strong>2</strong><span>Creating our Application</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/controllers.html"><strong>3</strong><span>Creating Controllers</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/urlMappings.html"><strong>4</strong><span>Defining URL Mappings</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/splitUrlMappings.html"><strong>5</strong><span>Organize URL Mappings</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/testing.html"><strong>6</strong><span>Testing URL Mappings</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/conclusion.html"><strong>7</strong><span>Conclusion</span></a>
                        </div>
                        
                        <div class="toc-item" style="margin-left:0"><a href="../guide/helpWithGrails.html"><strong>8</strong><span>Help with Grails</span></a>
                        </div>
                        
                    </div>
                </div>
            </li>
        </ul>
    </div>


</div>

<table id="colset" border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td id="col1">
            <div id="main" class="corner-all">

                
                    <div class="toc-item prev-left"><a href="../guide/creatingTheApp.html">&lt;&lt; <strong>2</strong><span>Creating our Application</span></a></div>
                

                
                    <div class="toc-item next-right"><a href="../guide/urlMappings.html"><strong>4</strong><span>Defining URL Mappings</span> >></a></div>
                


                

                

<h1 id="controllers">3 Creating Controllers</h1>

<div class='contribute-btn'>
    <button type='button' class='btn btn-default' onclick='window.location.href="https://github.com/grails-guides/grails_url_mappings/edit/master/src/main/docs/guide/controllers.adoc"'>
        <i class='fa fa-pencil-square-o'></i> Improve this doc
    </button>
</div>


<div class="paragraph">
<p>Before we can define our URL mappings, we need to create some <strong>controllers</strong>. You can think of them as the "web layer" of our application. Controllers respond to requests (i.e., from a user&#8217;s browser, or from a another microservice), obtain data from the model, and return a response, such as an HTML page or a JSON string.</p>
</div>
<div class="paragraph">
<p>You can create a controller by simply creating a Groovy class under the <code>grails-app/controllers</code> directory. However, Grails provides a handy command for creating controllers on the command-line.</p>
</div>
<div class="paragraph">
<p>Because we&#8217;re going to create several controllers, let&#8217;s use the <strong>interactive mode</strong> provided by the Grails CLI. Run the following command from within your project directory:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">~ ./grailsw
...

grails &gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Once the interactive CLI is loaded up, you can run any available Grails commands, including <code>create-controller</code>. Run the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">grails &gt; create-controller demo.Talk
grails &gt; create-controller demo.Speaker
grails &gt; create-controller demo.Agenda
grails &gt; create-controller demo.Conference</code></pre>
</div>
</div>
<div class="paragraph">
<p>Go head and quit the Grails CLI:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="bash">grails &gt; exit</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we have our controllers, it&#8217;s time to create <strong>actions</strong> which will be exposed as endpoints for users of our application (whether humans or perhaps a client of our API). Actions are simply methods defined in a controller class. In a <strong>CRUD</strong> (*C*reate, *R*ead, *U*pdate, *D*elete) controller, you will typically want actions such as shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="type">class</span> <span class="class">CrudController</span> {

    <span class="keyword">def</span> <span class="function">index</span>() {} <span class="comment">//usually a &quot;list&quot; view</span>

    <span class="keyword">def</span> <span class="function">save</span>() {} <span class="comment">//save new records</span>

    <span class="keyword">def</span> <span class="function">show</span>(<span class="predefined-type">Serializable</span> id) {} <span class="comment">//retrieve details on a specific record</span>

    <span class="keyword">def</span> <span class="function">update</span>(<span class="predefined-type">Serializable</span> id) {} <span class="comment">//update a specific record</span>

    <span class="keyword">def</span> <span class="function">delete</span>(<span class="predefined-type">Serializable</span> id) {} <span class="comment">//delete specific record</span>
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>If this was a <strong>REST</strong> controller, the above actions might be sufficient for CRUD operations. If we wanted to also display HTML forms for editing and creating records, we might also add <code>create</code> and <code>edit</code> actions to display those pages.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s stub out CRUD actions for our (future) domain model. Edit the first three controllers (<code>TalkController</code>, <code>SpeakerController</code>, and <code>AgendaController</code>) as shown below:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/demo/TalkController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="type">class</span> <span class="class">TalkController</span> {

    <span class="keyword">def</span> <span class="function">index</span>() {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Retrieving all Talks...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">save</span>() {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Saving new Talk...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">show</span>(<span class="predefined-type">Long</span> id) {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Retrieving Talk </span><span class="inline"><span class="inline-delimiter">${</span>id<span class="inline-delimiter">}</span></span><span class="content">...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">update</span>(<span class="predefined-type">Long</span> id) {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Updating Talk </span><span class="inline"><span class="inline-delimiter">${</span>id<span class="inline-delimiter">}</span></span><span class="content">...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">delete</span>(<span class="predefined-type">Long</span> id) {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Deleting Talk </span><span class="inline"><span class="inline-delimiter">${</span>id<span class="inline-delimiter">}</span></span><span class="content">...</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/demo/SpeakerController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="type">class</span> <span class="class">SpeakerController</span> {

    <span class="keyword">def</span> <span class="function">index</span>() {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Retrieving all Speakers...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">save</span>() {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Saving new Speaker...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">show</span>(<span class="predefined-type">Long</span> id) {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Retrieving Speaker </span><span class="inline"><span class="inline-delimiter">${</span>id<span class="inline-delimiter">}</span></span><span class="content">...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">update</span>(<span class="predefined-type">Long</span> id) {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Updating Speaker </span><span class="inline"><span class="inline-delimiter">${</span>id<span class="inline-delimiter">}</span></span><span class="content">...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">delete</span>(<span class="predefined-type">Long</span> id) {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Deleting Speaker </span><span class="inline"><span class="inline-delimiter">${</span>id<span class="inline-delimiter">}</span></span><span class="content">...</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/demo/AgendaController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="type">class</span> <span class="class">AgendaController</span> {

    <span class="keyword">def</span> <span class="function">index</span>() {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Retrieving all Agendas...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">save</span>() {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Saving new Agenda...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">show</span>(<span class="predefined-type">Long</span> id) {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Retrieving Agenda </span><span class="inline"><span class="inline-delimiter">${</span>id<span class="inline-delimiter">}</span></span><span class="content">...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">update</span>(<span class="predefined-type">Long</span> id) {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Updating Agenda </span><span class="inline"><span class="inline-delimiter">${</span>id<span class="inline-delimiter">}</span></span><span class="content">...</span><span class="delimiter">&quot;</span></span>
    }

    <span class="keyword">def</span> <span class="function">delete</span>(<span class="predefined-type">Long</span> id) {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Deleting Agenda </span><span class="inline"><span class="inline-delimiter">${</span>id<span class="inline-delimiter">}</span></span><span class="content">...</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>For the <code>ConferenceController</code>, we&#8217;ll create a different set of actions - <code>talks</code>, <code>speakers</code>, and <code>agenda</code>. In addition, the <code>talks</code> and <code>speakers</code> actions will accept an optional <code>id</code> parameter, so that we can display a specific speaker or talk.</p>
</div>
<div class="paragraph">
<p>Edit <code>ConferenceController.groovy</code> as shown below:</p>
</div>
<div class="listingblock">
<div class="title">grails-app/controllers/demo/ConferenceController.groovy</div>
<div class="content">
<pre class="CodeRay highlight"><code data-lang="groovy"><span class="keyword">package</span> demo

<span class="type">class</span> <span class="class">ConferenceController</span> {

    <span class="keyword">def</span> <span class="function">talks</span>(<span class="predefined-type">Long</span> id) {
        <span class="keyword">if</span>(id) {
            render <span class="string"><span class="delimiter">&quot;</span><span class="content">Returning conference talk </span><span class="inline"><span class="inline-delimiter">${</span>id<span class="inline-delimiter">}</span></span><span class="content">...</span><span class="delimiter">&quot;</span></span>
        } <span class="keyword">else</span> {
            render <span class="string"><span class="delimiter">&quot;</span><span class="content">Returning conference talks...</span><span class="delimiter">&quot;</span></span>
        }

    }

    <span class="keyword">def</span> <span class="function">speakers</span>(<span class="predefined-type">Long</span> id) {
        <span class="keyword">if</span>(id) {
            render <span class="string"><span class="delimiter">&quot;</span><span class="content">Returning conference speaker </span><span class="inline"><span class="inline-delimiter">${</span>id<span class="inline-delimiter">}</span></span><span class="content">...</span><span class="delimiter">&quot;</span></span>
        } <span class="keyword">else</span> {
            render <span class="string"><span class="delimiter">&quot;</span><span class="content">Returning conference speakers...</span><span class="delimiter">&quot;</span></span>
        }
    }

    <span class="keyword">def</span> <span class="function">agenda</span>() {
        render <span class="string"><span class="delimiter">&quot;</span><span class="content">Returning conference agenda...</span><span class="delimiter">&quot;</span></span>
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now that we have our controller actions stubbed out, let&#8217;s see what Grails URL mappings have given us out of the box.</p>
</div>


                <div style="clear:both;margin-top:15px;"></div>
                
                    <div class="toc-item prev-left"><a href="../guide/creatingTheApp.html">&lt;&lt; <strong>2</strong><span>Creating our Application</span></a></div>
                
                    <div class="toc-item next-right"><a href="../guide/urlMappings.html"><strong>4</strong><span>Defining URL Mappings</span> >></a></div>
                
                <div style="clear:both"></div>
            </div>
        </td>
        <td id="col2">
            <div class="local clearfix">
                <div class="local-title" style="text-align: right"><a href="https://travis-ci.org/grails-guides/grails_url_mappings"><img src="https://travis-ci.org/grails-guides/grails_url_mappings.svg?branch=master" /></a></div>            
                 <div class="local-title">
                    <a href="https://github.com/grails-guides/grails_url_mappings">
                    <svg height="35" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="35" aria-hidden="true"><path fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/></svg></a> &nbsp;&nbsp;Get the Code
                </div>
                <div class="menu">
                    <div class="input-group">                        
                        <button href="#" onclick="document.getElementById('github-url').value='git@github.com:grails-guides/grails_url_mappings.git'" class="codeButton">SSH</button>
                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/grails_url_mappings.git'" class="codeButton">HTTPS</button>
                        <button onclick="document.getElementById('github-url').value='https://github.com/grails-guides/grails_url_mappings'" class="codeButton">Subversion</button>
                    </div>
       
                    <div class="input-group">                    
                        <!-- Target -->
                        <input id="github-url" value="git@github.com:grails-guides/grails_url_mappings.git" type="text" />

                        <!-- Trigger -->
                        <button class="clipbtn" type="button" data-clipboard-target="#github-url">

                            <img width="13" src="../img/clippy.svg" alt="Copy to clipboard">
                        </button>       

                    </div>
                    <div class="input-group">
                      <a href="https://github.com/grails-guides/grails_url_mappings/archive/master.zip" class="downloadButton">Download ZIP</a>
                    </div>
                </div>
            </div>
        </td>
    </tr>
</table>

<div id="footer">
    Copies of this document may be made for your own use and for distribution to others, provided that you do not charge any fee for such copies and further provided that each copy contains this Copyright Notice, whether distributed in print or electronically. All guides are released with an ASLv2 license for the code, and Creative Commons license for the writing. 
    
</div>

<script type="text/javascript" src="../js/docs.js"></script>

</body>
</html>
